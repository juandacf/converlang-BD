ID,Tipo,Categoría,Descripción,Prioridad,Criterios de aceptación (Gherkin)
NFR-001,NFR,Seguridad,Cifrado en tránsito TLS 1.2+ para todas las APIs,Must,"Dado el entorno productivo, Cuando un cliente se conecta, Entonces la conexión usa HTTPS con TLS >=1.2."
NFR-002,NFR,Seguridad,Hash de contraseñas con bcrypt/argon2 en backend (nunca texto plano),Must,"Dado un alta/login, Cuando se procesa la contraseña, Entonces se usa hash fuerte y sal aleatoria."
NFR-003,NFR,Seguridad,RBAC: roles admin/teacher/user aplicados en endpoints y consultas,Must,"Dado un token válido, Cuando accedo a un recurso, Entonces el permiso se valida por rol y ownership."
NFR-004,NFR,Seguridad,"Auditoría obligatoria para users, sessions, teacher_profiles",Must,"Dado una operación DML crítica, Cuando se ejecuta, Entonces audit_logs registra old/new con user e IP."
NFR-005,NFR,Seguridad,"Validación de entrada server-side (límites de longitud, regex email)",Must,"Dado un payload inválido, Cuando llega al backend, Entonces la petición se rechaza con 4xx."
NFR-006,NFR,Seguridad,Protección contra inyección SQL (queries parametrizadas),Must,"Dado parámetros de usuario, Cuando se consulta DB, Entonces se usan parámetros tipados."
NFR-007,NFR,Seguridad,"Política de contraseñas (mínimo 12 caracteres, complejidad configurable)",Should,"Dado un alta/cambio de contraseña, Cuando no cumple política, Entonces se rechaza con mensaje claro."
NFR-008,NFR,Seguridad,Rotación de secretos/keys de JWT/API,Should,"Dado una key comprometida, Cuando se rota, Entonces los tokens antiguos expiran según política."
NFR-009,NFR,Seguridad,Registro de IP y user_agent en auditoría,Should,"Dado un cambio crítico, Cuando se audita, Entonces se captura ip_address y user_agent."
NFR-010,NFR,Seguridad,Mascaramiento de PII en logs,Should,"Dado un error, Cuando se loguea, Entonces no se exponen emails completos ni datos sensibles."
NFR-011,NFR,Rendimiento,Consultas de sesiones por usuario/estado <= 150 ms p95,Should,"Dado tráfico normal, Cuando consulto sesiones, Entonces p95 <= 150 ms usando índices."
NFR-012,NFR,Rendimiento,Paginación estándar 50 ítems por página,Should,"Dado listados largos, Cuando pagino, Entonces no se superan límites de memoria ni tiempo."
NFR-013,NFR,Rendimiento,Batch insert/export soporta 5k filas en < 60 s,Could,"Dado un lote, Cuando proceso 5k filas, Entonces finaliza < 60 s en hardware objetivo."
NFR-014,NFR,Rendimiento,"Índices críticos creados y mantenidos (users, sessions, chat, notifications)",Must,"Dado consultas frecuentes, Cuando ejecuto, Entonces los índices reducen tiempos de búsqueda."
NFR-015,NFR,Disponibilidad,SLA de disponibilidad 99.9% mensual (servicios core),Should,"Dado producción, Cuando monitoreo uptime, Entonces el downtime mensual <= 43.8 minutos."
NFR-016,NFR,Disponibilidad,Retry con backoff para llamadas a DB transitorias,Should,"Dado un fallo transitorio, Cuando reintento, Entonces se aplica backoff exponencial."
NFR-017,NFR,Disponibilidad,Circuit breaker en llamadas de backend a DB,Could,"Dado fallos persistentes, Cuando se supera umbral, Entonces abre circuito y protege al sistema."
NFR-018,NFR,Escalabilidad,Soportar 10k usuarios activos mensuales sin degradación notable,Should,"Dado carga de 10k MAU, Cuando uso funciones clave, Entonces latencias p95 se mantienen en objetivos."
NFR-019,NFR,Escalabilidad,Sharding/partitioning opcional en tablas de logs a futuro,Could,"Dado crecimiento, Cuando supero volúmenes, Entonces puedo particionar sin downtime mayor."
NFR-020,NFR,Escalabilidad,Separación de lectura/escritura (read replicas) planificada,Could,"Dado alto read load, Cuando activo réplicas, Entonces consultas de lectura se descargan."
NFR-021,NFR,Observabilidad,Trazabilidad de requests con correlación (trace_id),Should,"Dado una petición, Cuando viaja por servicios, Entonces el trace_id se propaga en logs."
NFR-022,NFR,Observabilidad,"Métricas de DB (TPS, latencia, locks) expuestas",Should,"Dado monitoreo, Cuando consulto métricas, Entonces obtengo KPIs clave y alertas configuradas."
NFR-023,NFR,Observabilidad,Alertas por errores 5xx y latencia p95 fuera de umbral,Should,"Dado monitoreo, Cuando supero umbral, Entonces se notifica al canal on-call."
NFR-024,NFR,Mantenibilidad,Convención de nombres y linting en SQL/PLpgSQL,Must,"Dado CI, Cuando se ejecuta, Entonces falla si no se cumple estilo acordado."
NFR-025,NFR,Mantenibilidad,Migraciones versionadas (up/down) con control de cambios,Must,"Dado una release, Cuando despliego, Entonces las migraciones se aplican en orden y son reversibles."
NFR-026,NFR,Mantenibilidad,Cobertura de pruebas >= 80% en backend de negocio,Should,"Dado el pipeline, Cuando corre la suite, Entonces la cobertura es >= 80%."
NFR-027,NFR,Mantenibilidad,Documentación de endpoints/DB actualizada (OpenAPI + diagramas),Should,"Dado nuevas features, Cuando cambian contratos, Entonces la doc se actualiza en la misma PR."
NFR-028,NFR,Compatibilidad,API REST JSON UTF-8; timestamps en ISO-8601,Must,"Dado un consumidor, Cuando invoca, Entonces recibe/manda JSON UTF-8 y fechas ISO-8601."
NFR-029,NFR,Compatibilidad,Soporte CORS configurado para front en React,Must,"Dado el front, Cuando llama API, Entonces CORS permite orígenes autorizados."
NFR-030,NFR,Privacidad,Derecho al olvido: desactivación de cuenta y purga de datos no obligatorios,Should,"Dado una solicitud, Cuando cumplo normativa, Entonces elimino/anonimizo donde aplica."
NFR-031,NFR,Privacidad,Retención de logs de auditoría por 12 meses,Should,"Dado políticas, Cuando expira retención, Entonces logs se archivan o purgan seguro."
NFR-032,NFR,Privacidad,Minimización de datos (solo recolectar lo necesario),Must,"Dado formularios, Cuando se diseñan, Entonces solo piden campos imprescindibles."
NFR-033,NFR,Backup,Backups diarios encriptados; RPO 15 min; RTO 1 h,Should,"Dado un desastre, Cuando restauro, Entonces cumplo RPO/RTO definidos."
NFR-034,NFR,Backup,Restore probado trimestralmente,Should,"Dado el plan, Cuando simulo restore, Entonces la validación es satisfactoria."
NFR-035,NFR,DevOps,CI/CD con migraciones y rollback automático ante fallo,Must,"Dado un despliegue, Cuando falla, Entonces se revierte de forma automática."
NFR-036,NFR,DevOps,Entornos separados (dev/stg/prod) con datos sanitizados,Must,"Dado pruebas, Cuando uso datos, Entonces no contienen PII real en dev/stg."
NFR-037,NFR,Usabilidad,Mensajes de error claros y accionables,Should,"Dado un error de validación, Cuando ocurre, Entonces el usuario entiende cómo resolverlo."
NFR-038,NFR,Usabilidad,Tiempo de carga inicial de la app < 3 s en red 4G,Should,"Dado primera visita, Cuando cargo, Entonces TTI < 3 s en hardware objetivo."
NFR-039,NFR,Seguridad,"Rate limiting en endpoints sensibles (login, likes, matches)",Must,"Dado abuso, Cuando excede umbral, Entonces se limita la tasa y se registra intento."
NFR-040,NFR,Seguridad,Revocación de tokens en logout,Should,"Dado logout, Cuando se ejecuta, Entonces el token no es reutilizable."
NFR-041,NFR,Rendimiento,Consulta de notificaciones p95 <= 120 ms,Should,"Dado notificaciones, Cuando consulto, Entonces latencia p95 <= 120 ms."
NFR-042,NFR,Observabilidad,"Dashboards de KPIs (usuarios activos, sesiones completadas)",Could,"Dado operaciones, Cuando observo panel, Entonces veo métricas clave por día/mes."
NFR-043,NFR,Mantenibilidad,Feature flags para activar/desactivar módulos,Could,"Dado una feature, Cuando la desactivo, Entonces no requiere despliegue."
NFR-044,NFR,Compatibilidad,"Versionado de API (v1, v2) con deprecaciones documentadas",Should,"Dado cambios breaking, Cuando lanzo v2, Entonces v1 queda deprecada con plan de migración."
NFR-045,NFR,Backup,Verificación de integridad de backups (checksums),Should,"Dado un backup, Cuando valido, Entonces el checksum coincide."
NFR-046,NFR,Privacidad,Registro y exportación de datos personales del usuario (portabilidad),Could,"Dado una solicitud, Cuando pido mis datos, Entonces recibo un export JSON/CSV."
NFR-047,NFR,General,Buenas prácticas de código y revisiones por PR,Should,"Dado una PR, Cuando se revisa, Entonces pasa checklists de estilo y seguridad."
NFR-048,NFR,General,Buenas prácticas de código y revisiones por PR,Should,"Dado una PR, Cuando se revisa, Entonces pasa checklists de estilo y seguridad."
NFR-049,NFR,General,Buenas prácticas de código y revisiones por PR,Should,"Dado una PR, Cuando se revisa, Entonces pasa checklists de estilo y seguridad."
NFR-050,NFR,General,Buenas prácticas de código y revisiones por PR,Should,"Dado una PR, Cuando se revisa, Entonces pasa checklists de estilo y seguridad."
